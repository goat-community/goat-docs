---
sidebar_position: 2
---

# Layer Types

## Internal Layers 

In the spatial data architecture of the GOAT system, **Internal Layers** refer to key components that are stored and managed internally. These include the [Feature Layer](#1-feature-layer/), which contains spatially referenced geographic features that are fundamental to mapping and spatial analysis tasks. Alongside this is the [Table Layer](#2-table-layer), which consists of non-spatial, tabular data. This data is essential for carrying out detailed attribute analysis and maintains a link to the spatial features, although it does not itself contain spatial references.

### Data Types

In the GOAT system approach to data management, there are specific steps for integrating and fusing different data sets. These steps are tailored to the local context. In addition, further data processing steps are taken to ensure accuracy, completeness, and reliability.

The system is designed to handle a wide range of geometry types for spatial data. This capability is achieved by using a [PostgreSQL](https://www.postgresql.org/docs/) database enhanced with the [PostGIS](https://postgis.net/documentation/) extension. GOAT stores all geometry in the PostGIS geometry type within the **EPSG:4326** coordinate reference system. However, for operations involving length or area measurements, the PostGIS geography type is used. This type allows calculations in metres and offers greater accuracy due to its geodetic nature.

Furthermore, GOAT adopts a structured approach to data management by categorizing data into four specialized types. This categorization is intended to optimize the database schema for enhanced performance and scalability. The current schema includes a limited number of columns for internal layers, as specified by a certain enumeration class.

| Data Type  | Maximum Number of Columns |
|------------|---------------------------|
| integer    | 15                        |
| bigint     | 5                         |
| float      | 10                        |
| text       | 20                        |
| timestamp  | 3                         |
| arrfloat (Array of Floats)   | 3                         |
| arrint (Array of Integers)   | 3                         |
| arrtext (Array of Text)   | 3                         |
| jsonb (Binary JSON)    | 3                         |
| boolean    | 3                         |


### 1. Feature Layer
 **Feature Layer** serves as a dynamic repository of spatial features. It enables the retrieval and display of elements from a feature service based on their specific geometry type - be it point, multipoint, polyline or polygon. Using a feature layer, features can be visualised on a map, providing an understanding of their spatial distribution and characteristics.
 
 Users can upload and utilise data from Shapefiles, Geopackages, GeoJSON and KML files, each allowing a range of analyses tailored to the characteristics of the geometry type within GOAT.
 
 Within the GOAT framework, there are three different types of feature layers, to address different aspects of geospatial functionality:

- **Feature Layer Standard:** This is the primary feature layer type that is automatically selected when a user uploads a file. It supports a range of formats including GeoJSON, GPKG, KML and ZIP files. This layer serves as the foundation for basic geospatial operations within GOAT.

- **Feature Layer Tool:** Generated by the analytical capabilities of GOAT's tools, this layer includes all layers that have been processed or calculated using the tools available in GOAT. 

- **Feature Layer Scenario:** Dedicated to scenario-based analysis, this layer contains scenarios created by users to explore different spatial planning and development outcomes.

If you're preparing to upload your spatial data to GOAT, the system supports the following formats:

- **Point:** For datasets comprised primarily of discrete locations. Supported geometries include Point and MultiPoint, which correspond to PostgreSQL's **POINT** and **MULTIPOINT** types.

- **Line:** For datasets including linear features. It supports LineString and MultiLineString, correspond to PostgreSQL's **LINESTRING** and **MULTILINESTRING** types.

- **Polygon:** For datasets outlining area-based features. The geometries Polygon and MultiPolygon are supported, which relate to PostgreSQL's **POLYGON** and **MULTIPOLYGON** types.

- **No geometry:** For the upload of non-spatial, attribute-only data.


### 2. Table Layer
**Table Layer** in the GOAT system refers to a non-spatial dataset, which differs from the geospatial layers due to its lack of geographic reference points. These datasets can be used for the overall analysis and data management process. Within GOAT framework, Table Layers supports the importation of non-spatial data in widely-used formats such as CSV (Comma-Separated Values) and XLSX (Microsoft Excel Open XML Spreadsheet). 


## External Layers
Unlike internal layers, which are stored and managed directly within the GOAT system, **External Layers** are sourced from third-party services. These layers primarily include [Imagery Layer](#1-imagery-layer) and [Vector Tile Layer](#2-vectortilelayer), each serving distinct purposes.

### 1. Imagery Layer
**Imagery Layer** facilitates the integration of external Web Map Service (WMS) and Web Map Tile Service (WMTS) sources into various projects. This layer provides access to a range of georeferenced map images, such as topographic maps, obtained from external servers. While these images can be incorporated as static maps, it is important to note that they do not support analytical functions. 

:::tip Note
It is important to recognise that the presentation of these external image layers is dependent on the external service providing the WMS  (e.g. service from the Bundesamt für Kartographie und Geodäsie (BKG) "https://sgx.geodatenzentrum.de/wms_dtk500") or WMTS. 
Consequently, the visual presentation of the map imagery, including elements such as colour schemes and representation of geographic features, is not subject to change within the GOAT framework.
:::

### 2. Vector Tile Layer
**Vector Tile Layer** allows the integration of the Mapbox Vector Tile (MVT) (e.g. mapbox://mapbox.mapbox-terrain-v2) format into GOAT, allowing these efficient vector tiles to be used as static maps. This feature enhances GOAT's data presentation and provides a better mapping experience.